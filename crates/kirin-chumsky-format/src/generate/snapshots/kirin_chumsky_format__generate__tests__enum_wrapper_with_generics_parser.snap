---
source: crates/kirin-chumsky-format/src/generate/tests.rs
expression: parser
---
impl<'tokens, 'src: 'tokens, T: TypeLattice, Language>
    ::kirin::parsers::HasDialectParser<'tokens, 'src, Language> for WrapperWithGenerics<T>
where
    Language: ::kirin::ir::Dialect + 'tokens,
    T: ::kirin::parsers::HasParser<'tokens, 'src> + 'tokens,
    GenericInner<T>: ::kirin::parsers::HasDialectParser<'tokens, 'src, Language>,
{
    type Output = WrapperWithGenericsAST<'tokens, 'src, T, Language>;
    type TypeAST = <T as ::kirin::parsers::HasParser<'tokens, 'src>>::Output;
    #[inline]
    fn recursive_parser<I>(
        language: ::kirin::parsers::RecursiveParser<
            'tokens,
            'src,
            I,
            <Language as ::kirin::parsers::HasDialectParser<'tokens, 'src, Language>>::Output,
        >,
    ) -> ::kirin::parsers::BoxedParser<'tokens, 'src, I, Self::Output>
    where
        I: ::kirin::parsers::TokenInput<'tokens, 'src>,
        Language: ::kirin::parsers::HasDialectParser<'tokens, 'src, Language>,
    {
        use kirin::parsers::chumsky::prelude::*;
        < GenericInner < T > as :: kirin :: parsers :: HasDialectParser < 'tokens , 'src , Language >> :: recursive_parser (language . clone ()) . map (| inner | -> WrapperWithGenericsAST < 'tokens , 'src , T , Language > { WrapperWithGenericsAST :: Inner (inner) }) . boxed ()
    }
}
impl<'tokens, 'src: 'tokens, T: TypeLattice> ::kirin::parsers::HasParser<'tokens, 'src>
    for WrapperWithGenerics<T>
where
    T: ::kirin::parsers::HasParser<'tokens, 'src> + 'tokens,
    GenericInner<T>: ::kirin::parsers::HasDialectParser<'tokens, 'src, WrapperWithGenerics<T>>,
{
    type Output = WrapperWithGenericsAST<'tokens, 'src, T, WrapperWithGenerics<T>>;
    fn parser<I>() -> ::kirin::parsers::BoxedParser<'tokens, 'src, I, Self::Output>
    where
        I: ::kirin::parsers::TokenInput<'tokens, 'src>,
    {
        use kirin::parsers::chumsky::prelude::*;
        ::kirin::parsers::chumsky::recursive::recursive(|language| {
            <WrapperWithGenerics<T> as ::kirin::parsers::HasDialectParser<
                'tokens,
                'src,
                WrapperWithGenerics<T>,
            >>::recursive_parser(language)
        })
        .boxed()
    }
}
