---
source: crates/kirin-chumsky-format/src/generate/tests.rs
expression: parser
---
impl<'tokens, 'src: 'tokens, T: TypeLattice>
    ::kirin_chumsky::HasDialectParser<'tokens, 'src, GenericReturn<T>> for GenericReturn<T>
{
    type Output = GenericReturnAST<'tokens, 'src, GenericReturn<T>>;
    type TypeAST = <T as ::kirin_chumsky::HasParser<'tokens, 'src>>::Output;
    #[inline]
    fn recursive_parser<I>(
        language: ::kirin_chumsky::RecursiveParser<'tokens, 'src, I, Self::Output>,
    ) -> ::kirin_chumsky::BoxedParser<'tokens, 'src, I, Self::Output>
    where
        I: ::kirin_chumsky::TokenInput<'tokens, 'src>,
        GenericReturn<T>: ::kirin_chumsky::HasDialectParser<'tokens, 'src, GenericReturn<T>>,
    {
        use chumsky::prelude::*;
        let parser: ::kirin_chumsky::BoxedParser<
            'tokens,
            'src,
            I,
            GenericReturnAST<'tokens, 'src, GenericReturn<T>>,
        > = {
            use kirin_lexer::Token;
            ::chumsky::prelude::just(Token::Identifier("return"))
                .ignore_then(::kirin_chumsky::ssa_value::<_, GenericReturn<T>, T>())
                .map(
                    |field_0| -> GenericReturnAST<'tokens, 'src, GenericReturn<T>> {
                        GenericReturnAST(field_0, ::core::marker::PhantomData)
                    },
                )
        }
        .boxed();
        unsafe { ::core::mem::transmute(parser) }
    }
}
impl<'tokens, 'src: 'tokens, T: TypeLattice> ::kirin_chumsky::HasParser<'tokens, 'src>
    for GenericReturn<T>
where
    T: ::kirin_chumsky::HasParser<'tokens, 'src, Output = T>,
{
    type Output = GenericReturnAST<'tokens, 'src, GenericReturn<T>>;
    fn parser<I>() -> ::kirin_chumsky::BoxedParser<'tokens, 'src, I, Self::Output>
    where
        I: ::kirin_chumsky::TokenInput<'tokens, 'src>,
    {
        use chumsky::prelude::*;
        ::chumsky::recursive::recursive(|language| {
            <GenericReturn<T> as ::kirin_chumsky::HasDialectParser<
                'tokens,
                'src,
                GenericReturn<T>,
            >>::recursive_parser(language)
        })
        .boxed()
    }
}
