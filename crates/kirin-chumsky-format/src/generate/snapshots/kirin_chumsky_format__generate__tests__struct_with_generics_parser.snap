---
source: crates/kirin-chumsky-format/src/generate/tests.rs
expression: parser
---
impl<'tokens, 'src: 'tokens, T: TypeLattice> ::kirin::parsers::HasDialectParser<'tokens, 'src>
    for GenericReturn<T>
where
    T: ::kirin::parsers::HasParser<'tokens, 'src> + 'tokens,
{
    type Output<__Language>
        = GenericReturnAST<'tokens, 'src, T, __Language>
    where
        __Language: ::kirin::ir::Dialect + 'tokens;
    type TypeAST = <T as ::kirin::parsers::HasParser<'tokens, 'src>>::Output;
    #[inline]
    fn recursive_parser<I, __Language, __LanguageOutput>(
        language: ::kirin::parsers::RecursiveParser<'tokens, 'src, I, __LanguageOutput>,
    ) -> ::kirin::parsers::BoxedParser<'tokens, 'src, I, Self::Output<__Language>>
    where
        I: ::kirin::parsers::TokenInput<'tokens, 'src>,
        __Language: ::kirin::ir::Dialect + 'tokens,
        __LanguageOutput: Clone + 'tokens,
    {
        use kirin::parsers::chumsky::prelude::*;
        {
            use kirin::parsers::Token;
            ::kirin::parsers::chumsky::prelude::just(Token::Identifier("return"))
                .ignore_then(::kirin::parsers::ssa_value::<_, T>())
                .map(
                    |field_0| -> GenericReturnAST<'tokens, 'src, T, __Language> {
                        GenericReturnAST(
                            field_0,
                            ::core::marker::PhantomData::<
                                fn() -> (&'tokens (), &'src (), __Language),
                            >,
                        )
                    },
                )
        }
        .boxed()
    }
}
impl<'tokens, 'src: 'tokens, T: TypeLattice> ::kirin::parsers::HasParser<'tokens, 'src>
    for GenericReturn<T>
where
    T: ::kirin::parsers::HasParser<'tokens, 'src> + 'tokens,
{
    type Output = GenericReturnAST<'tokens, 'src, T, GenericReturn<T>>;
    fn parser<I>() -> ::kirin::parsers::BoxedParser<'tokens, 'src, I, Self::Output>
    where
        I: ::kirin::parsers::TokenInput<'tokens, 'src>,
    {
        use kirin::parsers::chumsky::prelude::*;
        :: kirin :: parsers :: chumsky :: recursive :: recursive (| language | { < GenericReturn < T > as :: kirin :: parsers :: HasDialectParser < 'tokens , 'src , >> :: recursive_parser :: < I , GenericReturn < T > , Self :: Output > (language) }) . boxed ()
    }
}
